# 开发计划 - Windows 桌面便签应用

## 开发原则
- 每个需求必须**开发完成并测试通过**后才能进行下一个
- 每个阶段产出可运行、可验证的版本

---

## 阶段一：项目基础架构

### 1.1 初始化 Electron + React + Tailwind 项目
**需求描述**: 搭建项目基础架构
**验收标准**:
- [ ] 项目能够正常运行
- [ ] React 页面能够正常显示
- [ ] Tailwind CSS 样式生效

**开发步骤**:
1. 创建项目目录结构
2. 初始化 package.json
3. 安装 Electron、React、Tailwind CSS 相关依赖
4. 配置 Electron 主进程入口
5. 配置 React + Vite 开发环境
6. 配置 Tailwind CSS

---

### 1.2 创建基础窗口
**需求描述**: 创建 Electron 窗口，显示 React 页面
**验收标准**:
- [ ] 窗口能够正常打开
- [ ] 窗口标题显示正确
- [ ] 窗口最小化/最大化/关闭功能正常

**开发步骤**:
1. 创建主进程 `main.js`
2. 创建 BrowserWindow 实例
3. 配置窗口基本属性（宽度、高度、标题）
4. 添加窗口控制按钮

---

## 阶段二：单便签基础功能

### 2.1 便签内容编辑
**需求描述**: 创建可编辑的便签内容区域
**验收标准**:
- [ ] 便签内显示可编辑的文本区域
- [ ] 能够输入和修改内容
- [ ] 文本区域占满便签空间

**开发步骤**:
1. 创建 NoteCard 组件
2. 添加 textarea 元素
3. 设置基本样式

---

### 2.2 便签窗口样式
**需求描述**: 设置便签窗口的视觉效果
**验收标准**:
- [ ] 便签背景为黑色半透明
- [ ] 透明度可配置（默认 0.8）
- [ ] 文字颜色为白色或浅色

**开发步骤**:
1. 设置便签背景色和透明度
2. 配置文字颜色
3. 添加边框和圆角样式

---

### 2.3 便签窗口可调整大小
**需求描述**: 支持拖动窗口边缘调整大小
**验收标准**:
- [ ] 能够通过拖动窗口边缘调整大小
- [ ] 调整大小后窗口不会重叠或消失
- [ ] 有最小尺寸限制（防止过小无法操作）

**开发步骤**:
1. 配置 Electron 窗口的 resizable 属性
2. 设置最小尺寸限制
3. 测试调整大小功能

---

### 2.4 窗口无边框设计
**需求描述**: 移除窗口默认边框
**验收标准**:
- [ ] 窗口无系统边框
- [ ] 仅显示便签内容区域
- [ ] 窗口控制按钮可手动添加

**开发步骤**:
1. 设置 frame: false
2. 添加自定义窗口控制按钮（最小化、关闭）
3. 调整窗口样式

---

## 阶段三：窗口管理功能

### 3.1 窗口置顶
**需求描述**: 便签窗口悬浮在桌面最顶层
**验收标准**:
- [ ] 便签窗口始终在其他窗口上方
- [ ] 切换到其他应用时便签仍然可见

**开发步骤**:
1. 配置窗口的 alwaysOnTop 属性
2. 添加置顶开关功能（可选）

---

### 3.2 窗口可拖动
**需求描述**: 便签窗口可以通过拖动移动位置
**验收标准**:
- [ ] 窗口可以自由拖动到任意位置
- [ ] 拖动时窗口跟随鼠标移动
- [ ] 释放鼠标后窗口停留在新位置

**开发步骤**:
1. 配置 Electron 窗口的 movable 属性
2. 添加自定义拖动区域

---

### 3.3 窗口位置记忆
**需求描述**: 记录并恢复窗口关闭前的位置和大小
**验收标准**:
- [ ] 窗口关闭时记录位置和大小
- [ ] 重新打开窗口时恢复到上次位置和大小
- [ ] 首次打开时使用默认位置和大小

**开发步骤**:
1. 创建窗口位置存储机制
2. 在窗口移动/调整时记录状态
3. 窗口关闭时保存最终状态
4. 窗口打开时读取并应用保存的状态

---

## 阶段四：数据持久化

### 4.1 创建存储文件
**需求描述**: 创建 JSON 存储文件
**验收标准**:
- [ ] 能够创建 data 目录
- [ ] 能够创建 notes.json 文件
- [ ] 文件格式符合 PRD 规范

**开发步骤**:
1. 创建 data 目录
2. 创建空的 notes.json 文件
3. 实现基本的文件读写函数

---

### 4.2 便签内容保存
**需求描述**: 将便签内容保存到本地文件
**验收标准**:
- [ ] 内容编辑后能够保存
- [ ] 保存格式符合 JSON 规范
- [ ] 包含便签的 id、content、位置等信息

**开发步骤**:
1. 实现保存便签内容的函数
2. 实现读取便签内容的函数
3. 实现删除便签内容的函数

---

### 4.3 自动保存
**需求描述**: 便签内容自动保存
**验收标准**:
- [ ] 内容编辑后自动保存
- [ ] 有防抖机制（避免频繁保存）
- [ ] 保存失败时有错误提示

**开发步骤**:
1. 添加内容变更监听
2. 实现防抖保存机制
3. 添加错误处理

---

## 阶段五：多便签管理

### 5.1 多便签创建
**需求描述**: 支持创建多个便签窗口
**验收标准**:
- [ ] 能够创建新的便签
- [ ] 新便签独立于现有便签
- [ ] 多个便签可以同时存在

**开发步骤**:
1. 修改数据结构支持多个便签
2. 实现创建便签功能
3. 实现便签列表管理

---

### 5.2 便签切换
**需求描述**: 在多个便签之间切换
**验收标准**:
- [ ] 能够列出所有便签
- [ ] 可以切换到指定便签
- [ ] 当前便签有视觉标识

**开发步骤**:
1. 创建便签列表组件
2. 实现切换逻辑
3. 添加视觉标识

---

### 5.3 便签删除
**需求描述**: 删除不需要的便签
**验收标准**:
- [ ] 能够删除便签
- [ ] 删除前有确认提示
- [ ] 删除后列表更新

**开发步骤**:
1. 添加删除按钮
2. 实现删除逻辑
3. 添加确认对话框

---

## 阶段六：快捷键功能

### 6.1 全局快捷键显示/隐藏
**需求描述**: 设置全局快捷键控制便签显示/隐藏
**验收标准**:
- [ ] 设置快捷键 Ctrl+`
- [ ] 按下快捷键显示/隐藏便签
- [ ] 应用未激活时快捷键仍然有效

**开发步骤**:
1. 安装全局快捷键模块
2. 注册全局快捷键
3. 实现显示/隐藏逻辑

---

### 6.2 快捷键自定义
**需求描述**: 支持用户自定义快捷键
**验收标准**:
- [ ] 能够修改快捷键
- [ ] 新快捷键立即生效
- [ ] 快捷键冲突时有提示

**开发步骤**:
1. 创建快捷键设置界面
2. 实现快捷键录制功能
3. 验证快捷键有效性
4. 保存自定义快捷键

---

### 6.3 多便签独立快捷键
**需求描述**: 每个便签可设置独立的快捷键
**验收标准**:
- [ ] 每个便签可以设置不同快捷键
- [ ] 按下对应快捷键显示特定便签
- [ ] 多个便签快捷键不冲突

**开发步骤**:
1. 扩展便签数据结构（添加 hotkey 字段）
2. 实现每个便签的快捷键注册
3. 实现快捷键与便签的映射

---

## 阶段七：配置功能

### 7.1 透明度配置
**需求描述**: 便签背景透明度可配置
**验收标准**:
- [ ] 能够调整透明度
- [ ] 调整后立即生效
- [ ] 透明度值被保存

**开发步骤**:
1. 创建透明度设置界面
2. 实现透明度调整
3. 保存透明度设置

---

### 7.2 开机自启动（可选）
**需求描述**: 支持开机自启动
**验收标准**:
- [ ] 能够开启/关闭开机自启动
- [ ] 设置后重启电脑仍然有效
- [ ] 有明显的开关标识

**开发步骤**:
1. 使用 Electron 的 autoLaunch 模块
2. 创建开关界面
3. 实现开关逻辑

---

## 阶段八：UI 优化

### 8.1 极简界面设计
**需求描述**: 优化界面，去除冗余元素
**验收标准**:
- [ ] 界面仅显示文字内容
- [ ] 无冗余图标或按钮
- [ ] 拖动区域明显易用

**开发步骤**:
1. 简化界面元素
2. 优化拖动区域
3. 调整间距和边距

---

### 8.2 快捷键提示
**需求描述**: 显示当前快捷键提示
**验收标准**:
- [ ] 显示全局快捷键提示
- [ ] 显示各便签的快捷键提示
- [ ] 提示位置合理

**开发步骤**:
1. 创建快捷键提示组件
2.快捷键
3. 调整 显示所有样式和位置

---

## 开发顺序总结

| 阶段 | 优先级 | 功能 |
|------|--------|------|
| 一 | P0 | 项目基础架构 |
| 二 | P0 | 单便签基础功能 |
| 三 | P1 | 窗口管理功能 |
| 四 | P1 | 数据持久化 |
| 五 | P1 | 多便签管理 |
| 六 | P1 | 快捷键功能 |
| 七 | P2 | 配置功能 |
| 八 | P2 | UI 优化 |

---

## 验收流程

每个阶段完成后，必须：
1. 完成该阶段所有验收标准
2. 进行手动测试验证
3. 记录测试结果
4. 确认无阻塞问题后进入下一阶段
